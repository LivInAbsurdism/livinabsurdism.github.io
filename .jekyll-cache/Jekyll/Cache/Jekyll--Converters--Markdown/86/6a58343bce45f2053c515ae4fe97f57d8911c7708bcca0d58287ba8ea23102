I"7<p>Em um post passado, mostrando como fazer a <a href="/clyell/blog/archlinux-lvm-luks/">instala√ß√£o do Arch Linux [0]</a>, utilizei do LVM para gerenciar os discos. L√° falei um pouco mais da teoria por tr√°s dele e tal. Aqui vou me ater mesmo a repassar o passo a passo utilizado para isso.</p>

<p>Uma quest√£o a ser dita √© que o LVM nos d√° a possibilidade de poder redimensionar nossas parti√ß√µes sem desligar o sistema. Acontece que a depender de sua aplica√ß√£o, mesmo que n√£o d√™ um shutdown no sistema, as consequ√™ncias podem ser as mesmas. Explico: para aumentar o tamanho da parti√ß√£o √© moleza, d√° para fazer sem mais nem menos. Agora para diminuir o volume de uma parti√ß√£o tem de desmont√°-la e tudo mais. E isso para alguns pode ser um grande problema.</p>

<p>Mas enfim, vamos l√°‚Ä¶</p>

<h2 id="reduzir-o-tamanho">Reduzir o tamanho</h2>

<p>Digamos que uma parti√ß√£o sua est√° sendo menos utilizada que outra e que voc√™ quer tirar um pouco de espa√ßo dessa determinada parti√ß√£o e colocar na outra. Pois bem, n√£o esque√ßa de adaptar os endere√ßos aqui para seu cen√°rio, uma breve explica√ß√£o:</p>

<ul>
  <li><code class="highlighter-rouge">/particao</code>: endere√ßo no qual a parti√ß√£o que voc√™ est√° usando est√° montada</li>
  <li><code class="highlighter-rouge">VolumeGroup</code>: acredito que o nome j√° √© autoexplicativo</li>
  <li><code class="highlighter-rouge">LogicalVolume01</code> e <code class="highlighter-rouge">LogicalVolume02</code>: os nomes tamb√©m j√° se explicam, mas a numera√ß√£o se refere a que o 01 √© o volume l√≥gico que ir√° diminuir de tamanho, enquanto o 02 o que ir√° aumentar</li>
  <li><code class="highlighter-rouge">XXG</code>: nova quantidade de gigas da parti√ß√£o que teve espa√ßo diminu√≠do</li>
</ul>

<p>Primeiro, desmonte a parti√ß√£o:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># umount /particao
</code></pre></div></div>

<p>Ent√£o, repare o sistema de arquivos:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># fsck -f /dev/VolumeGroup/LogicalVolume01
</code></pre></div></div>

<p>Agora de fato redimensione:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># resize2fs /dev/VolumeGroup/LogicalVolume01 XXG
</code></pre></div></div>

<p>E ent√£o, reduza o tamanho do volume l√≥gico para seu novo espa√ßo:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># lvreduce -L XXG /dev/VolumeGroup/LogicalVolume01
</code></pre></div></div>

<p>Agora monte sua parti√ß√£o numa boa:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># mount /particao
</code></pre></div></div>

<h2 id="aumentar-tamanho">Aumentar tamanho</h2>

<p>Depois que passei por alguns apertos passei a deixar alguns gigas ‚Äúsobrando‚Äù quando ia pensar no esquemas de parti√ß√µes, justamente por essa facilidade da adi√ß√£o em rela√ß√£o √† redu√ß√£o. Pois bem, tendo em vista que j√° se tem o espa√ßo sobrando, como o procedimento acima mostra como fazer, basta seguir:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># lvextend -L +10G /dev/mapper/main-root
# resize2fs /dev/mapper/main-root
</code></pre></div></div>

<p>E pronto. Agora cheque o tamanho dos discos com <code class="highlighter-rouge">df -h</code> e seja feliz! :)</p>

<p>At√©!</p>

<h2 id="links">Links</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[0]: http://localhost:4000/clyell/blog/archlinux-lvm-luks/
</code></pre></div></div>

:ET